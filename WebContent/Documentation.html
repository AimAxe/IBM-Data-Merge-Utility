<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>IBM Data Merge Utility</title>
    <style>
        @CHARSET "UTF-8";
        .section		{ width: 720px; margin: 10px 0px 0px 10px; border: 2px solid; background-color: DarkGrey;}
        .section p		{ width: 705px; margin: 4px 2px 2px 10px; }
        .sub-section	{ width: 700px; margin: 10px 10px 10px 15px; background-color: DarkGrey;}
        .hidden         { display: none;}
        .video			{ width: 320px; float: right; padding: 6px;}
        .json			{ border: 1px solid; margin: 5px 5px 5px 5px;  padding: 2px 2px 6px 2px; background-color: Cornsilk ; tab-size: 4 }
        .xml			{ border: 1px solid; margin: 5px 5px 5px 5px;  padding: 2px 2px 6px 2px; background-color: Cornsilk ; tab-size: 4 }
        .description	{ color: blue;  font-style: italic; font-size: 0.85em;}
        .keyword		{ color: blue;  font-weight: bold; font-size: 1.1em;}
        .metadata		{ border: 1px solid; margin: 10px; }
        .option			{ color: blue; }
        .replaced		{ color: red; font-style: italic; font-weight: bold; }
        .footerLink		{ text-align: right; font-size: 0.85em;}
        .footnote		{ font-size: 0.8em; }
        ul				{ margin: 4px 0px 10px 2px; }
        h2				{ margin: 4px 0px 10px 2px; }
        h3				{ margin: 10px 0px 2px 4px; }
        h4				{ margin: 4px 0px 0px 6px; }
        li				{ margin: 0px 0px 0px 0px; }
        pre				{ margin: 5px 0px 0px 5px; }
	</style>
</head>
<body>

<h1>IBM Data Merge Utility Documentation</h1>
<img src="images/dragonfly2.jpg"/>
<h2><a id="top">Table of Contents</a></h2>
<ul>
	<li><a href="#Licensing">Licensing</a></li>
	<li><a href="#Dependencies">Dependencies</a></li>
	<li><a href="#Overview">Overview</a>
	<ul>
		<li><a href="#Request">Calling the Merge Servlet</a></li>
		<li><a href="#Replace">The Replace Hash</a></li>
		<li><a href="#Inserting">Inserting Sub-Templates</a></li>
		<li><a href="#Reserved">Reserved Words</a></li>
		<li><a href="#Editor">The Template Editor</a></li>
		<li><a href="#Output">Output Files</a></li>
	</ul></li>
	<li><a href="#Directives">Directives</a>
	<ul>
		<li><a href="#Require">Require</a></li>
		<li><a href="#ReplaceVal">Replace Value</a></li>
		<li><a href="#InsertTag">Insert Sub-Templates from Tag</a></li>
		<li><a href="#InsertSql">Insert Sub-Templates from Sql Rows</a></li>
		<li><a href="#ReplaceRowSql">Get Replace Values From Sql Row</a></li>
		<li><a href="#ReplaceColSql">Get Replace Values From Sql Column</a></li>
		<li><a href="#InsertCsv">Insert Sub-Templates from Csv Rows</a></li>
		<li><a href="#ReplaceRowCsv">Get Replace Values From Csv Row</a></li>
		<li><a href="#ReplaceColCsv">Get Replace Values From Csv Column</a></li>
		<li><a href="#InsertHtml">Insert Sub-Templates from Html Table Rows</a></li>
		<li><a href="#ReplaceRowHtml">Get Replace Values From Html Table Row</a></li>
		<li><a href="#ReplaceColHtml">Get Replace Values From Html Table Column</a></li>
		<li><a href="#ReplaceMarkupHtml">Get Replace Values From Html Markup</a></li>
	</ul></li>
	<li>Providers
	<ul>
		<li><a href="#ProviderJdbc">JDBC Data</a></li>
		<li><a href="#ProviderCsv">CSV Data</a></li>
		<li><a href="#ProviderHtml">HTML Data</a></li>
		<li><a href="#ProviderTag">Tag Data</a></li>
	</ul></li>
	<li><a href="#Installing">Installing</a>
	<ul>
		<li><a href="#DeployBluemix">Deploying in Bluemix</a></li>
		<li><a href="#DeployDocker">Deploying in Docker</a></li>
		<li><a href="#DeployLiberty">Deploying on Linux with Liberty and IBM DB2 Express Edition</a></li>
		<li><a href="#DeployTomcat">Deploying on Linux with Tomcat and MySql</a></li>
		<li><a href="#DeployOracle">Deploying on Linux with Tomcat and Oracle Express</a></li>
	</ul></li>
	<li><a href="#Persistence">Template Persistence Options</a></li>
	<li><a href="#jSon">The Template jSon Format</a></li>
</ul>
	
	<div class="section">
	<h3><a id="Licensing">Licensing</a></h3>
	<div class="copyright"><pre>Copyright 2015, 2015 IBM
		
Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
	</pre></div>	 
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="Dependencies">Dependencies</a></h3>
	<p>The Java code has the following Open Source dependencies:
	<ul>
		<li>Log4j - <a href="http://logging.apache.org/log4j/">http://logging.apache.org/log4j/</a></li>
		<li>jUnit - <a href="http://junit.org">http://junit.org</a></li>
		<li>Commons CSV - <a href="https://commons.apache.org/proper/commons-csv/">https://commons.apache.org/proper/commons-csv/</a></li>
		<li>jSoup - <a href="http://jsoup.org">http://jsoup.org</a></li>
		<li>gson - <a href="https://code.google.com/p/google-gson/">https://code.google.com/p/google-gson/</a></li>
		<li>hibernate ORM - <a href="http://hibernate.org/orm/">http://hibernate.org/orm/</a></li>
	</ul>
	<p>Maven Build Values</p>
	<div class="xml"><pre><code>&lt;dependencies&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;junit&lt;/groupId&gt;
		&lt;artifactId&gt;junit&lt;/artifactId&gt;
		&lt;version&gt;4.11&lt;/version&gt;
		&lt;scope&gt;test&lt;/scope&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
		&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
		&lt;version&gt;2.3&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
		&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
		&lt;version&gt;2.3&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
		&lt;artifactId&gt;commons-csv&lt;/artifactId&gt;
		&lt;version&gt;1.1&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.jsoup&lt;/groupId&gt;
		&lt;artifactId&gt;jsoup&lt;/artifactId&gt;
		&lt;version&gt;1.8.2&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;
		&lt;artifactId&gt;gson&lt;/artifactId&gt;
		&lt;version&gt;2.3.1&lt;/version&gt;
	&lt;/dependency&gt;
	&lt;dependency&gt;
		&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
		&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
		&lt;version&gt;5.0.0.CR1&lt;/version&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="Overview">Calling the Merge Servlet</a></h3>
	<p>The IBM Data Merge Utility is accessed via the Merge Servlet which can be
	accessed at http://yourServer/Merge.html. Parameters passed on the http request
	are used to initilize the Replace Hash. The Template collection, name and column value
	can be provided as parameters. The following default values are used if not provided:</p>
	<ul><li>collection: "root"</li>
	<li>name: "default"</li>
	<li>column: empty</li></ul>
	<p>The URL: <br/>http://www.yourserver.com/Merge.html?collection=MyCollection&amp;name=MyTemplate<br/>
	will merge the template MyTemplate from the collection MyCollection.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div></div>
	
	<div class="section">
	<h3><a id="Overview">Overview</a></h3>
	<video class="video" controls><source src="video/cut1.mp4" type="video/mp4"></video>
	<p>The IBM Data Merge Utility is an open source general purpose Java utility, 
	exposed as an HTTP service, that uses Templates with your data source to create 
	one or more merge output files. The merge process is driven by a set of directives 
	associated with a template. The two types of directives are Replace and Insert and 
	they drive the replacement of key values in a template, and the insertion of sub-templates. 
	You can download source from GitHub here: 
	<a href="https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility">https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility</a>
	</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div></div>
	
	<div class="section">
	<video class="video" controls><source src="video/cut2.mp4" type="video/mp4"></video>
	<h3><a id="Replace">The Replace Hash</a></h3>
	<p>The most fundamental function of the merge process is the replacement of merge tags with data values. 
	The replace "From" values are wrapped in {brackets} and processed globally during the merge process. 
	These replace values are processed as a hash, which implies that adding a duplicate "From" value will
	replace the "To" value of the existing hash entry with the new value.</p> 
	<p>Many Directive Options (SQL Statements, Output Filenames, etc.) are processed by the Template
	Replace Hash before being used during the merge. Options that are processed by the Replace Hash are
	listed in the documents <span class="replaced">with this special mark-up</span></p>
	</div>

	<div class="section">
	<video class="video" controls><source src="video/cut3.mp4" type="video/mp4"></video>
	<br/><h3 class="directive"><a id="ReplaceRow">The Replace Row Directives</a></h3>
	<ul>
		<li><a href="#ReplaceRowSql">Replace From Sql Row</a></li>
		<li><a href="#ReplaceRowCsv">Replace From Csv Row</a></li>
		<li><a href="#ReplaceRowHtml">Replace From Html Row</a></li>
	</ul>
	<p>This directive will add replace values from a single-row result set returned by the data provider. 
	Column names are {wrapped} and used as the "from" value, the column value is the "to" value.</p>
	<div class="metadata"><h4>The Replace Row directives have no Directive Options</h4></div> 
	</div>
	
	<div class="section">
	<video class="video" controls><source src="video/cut4.mp4" type="video/mp4"></video>
	<h3 class="directive"><a id="ReplaceCol">The Replace Column Directives</a></h3>
	<ul>
		<li><a href="#ReplaceColSql">Replace From Sql Column</a></li>
		<li><a href="#ReplaceColCsv">Replace From Csv Column</a></li>
		<li><a href="#ReplaceColHtml">Replace From Html Column</a></li>
	</ul>
	<p>The replace column directive will load the replace hash with the values from 
	the "From Column" and "To Column" columns. The FromValue is {wrapped} in brackets. </p>
	<div class="metadata"><h4>The Replace Column directives have the following Options</h4>
	<ul>
		<li><span  class="option">From Column</span> - The name of the column that "From" values will be taken from</li>
		<li><span  class="option">To Column</span> - The name of the column that "To" values will be taken from</li>
	</ul></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<video class="video" controls><source src="video/cut5.mp4" type="video/mp4"></video>
	<h3><a id="Inserting">Inserting Sub-Templates Directives</a></h3>
	<ul>
		<li><a href="#InsertTag">Insert Sub-Templates from Tag</a></li>
		<li><a href="#InsertSql">Insert Sub-Templates from Sql</a></li>
		<li><a href="#InsertCsv">Insert Sub-Templates from Csv</a></li>
		<li><a href="#InsertHtml">Insert Sub-Templates from Html</a></li>
	</ul>
	<p>The insertion of sub-templates into a target template is the second core feature of the Merge Utility. 
	The Insert Rows directives work with a potentially multi-row data set, and sub-templates are inserted 
	into the target template, at &lt;tkBookmark id="SomeSubTemplate"/&gt; locations, 
	for each row of the result set. The name attribute of the bookmark identifyies the sub-template to insert.
	A template can have multiple bookmarks to insert multiple sub-templates for each row of the result set.</p>
	
	<video class="video" controls><source src="video/cut6.mp4" type="video/mp4"></video>
	<h3>Varying the Sub-Template Inserted</h3>
	<p>When inserting sub-templates, you can vary the sub-template being inserted based on data in the result set. 
	This is often based on a "Type" field in the result set, and relies on a "Collection" of templates with the same name 
	and a specified column value. If a template for the current column value is not found, the "empty" value is used. 
	If no "empty" value exists for the collection the merge will fail with a "Template Not Found" exception. </p>
	<div class="metadata"><h4>The Insert Subtemplate directives have the following Options</h4>
	<ul>
		<li><span class="option">From Collection</span> - The name of the collection that has the sub-template(s) to insert</li>
		<li><span class="option">Based on Column</span> - The name of the column used to select sub-templates (Optional)</li>
		<li><span class="option">Not Last Tags</span> - Tags that should be empty on the last insertion row</li>
		<li><span class="option">Only Last Tags</span> - Tags that should be empty on all except the last insertion row</li>
	</ul></div>
	<p>When inserting sub-templates various syntax rules often require that the list separator be different 
	than the list terminator. For example a comma separated list terminated with a period. This can be supported 
	in templates by using static replace tags for the separator/terminator, and then identifying those tags in 
	the "Not Last" and "Only Last" fields of the Insert Directive. Tags identified as "Not Last" are replaced
	with an empty value on the Last Row of the insert. Tags identified as "Only Last" are replaced with an empty 
	value on all except the last row of the insert.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="Editor">The Template Editor</a></h3>
	<p>The template editor can be accessed at http://yourServer/TemplateEditor.html</p>
	<p>A wire frame of the proposed Editor is show below, documentation on the editor will be placed here</p>
	<div>
	<img width="635" alt="Editor Wire Frame" src="images/EditorWireFrame.png">
	</div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="Reserved">Reserved Words</a></h3>
	<p>The following are reserved Replace Tags, that have various effects / meanings:</p> 	
	<ul>
		<li><span class="keyword">DragonFlyCacheReset</span> - The Data Merge Tool will cache all templates, allowing for very fast response 
			times and high throughput rates. Adding the parameter DragonFlyCacheReset with or without a value will
			clear the template cache before executing the merge. This value is not placed on the Replace Hash</li>
		<li><span class="keyword">DragonFlySoftFail</span> - If the value {DragonFlySoftFail} is in the replace stack, merge errors are written 
			as output into the template, rather than throwing exceptions back to a full merge failure. 
			This can be helpful in debugging problems with nested replace values or invalid sql result sets.</li> 
		<li><span class="keyword">DragonFlyReplaceValues</span> - The replace tag {DragonFlyReplaceValues} will be replaced with a full 
			dump of the replace hash, with the From values mangled as {-from} in place of {from}. 
			This tag can be useful when designing and debugging templates.</li>
		<li><span class="keyword">DragonFlyOutputFile</span> - The replace tag {DragonFlyOutputFile} will contain a generated GUID.zip or GUID.tar.gz string. 
			This is the file name of any additional generated output, and can frequently be used in a javascript 
			tag to initiate a download. NOTE: This value can be provided as an input parameter, however database 
			connection caching is associated with the guid during merge execution, so multiple concurrent merges 
			with the same {DragonFlyOutputFile} value will have unpredictable results. If provided on the replace 
			stack, you should ensure that this value is unique for the duration of the merge execution.</li>
		<li><span class="keyword">DragonFlyTemplateStack</span> - This will print out a / separated list of the current template full-names. 
			This can be useful when developing and debugging templates.</li>
	</ul>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="Output">Generating Extra Output Files</a></h3>
	<p>Any sub-template can be saved as an output file instead of being inserted into the target template, 
	by providing an output file name for the Template. All output files generated in this manner during a merge 
	are added to an archive, and placed in the merge output directory which is specified in the web.xml 
	configuration file.</p> 
	<p>The archive name is provided in the replace tag {DragonFlyeOutputFile} and a GUID is generated for the 
	file name if needed. If you pass DragonFlyOutputFile as a parameter to the merge you should ensure that the 
	file name provided is unique for the duration of the merge operation. Database connections are cached 
	based on this value, and multiple concurrent merges with the same DragonFlyOutputFile name will have 
	unpredictable results.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="Persistence">Template Persistence Options</a></h3>
	<p>Templates can be persisted to a Tempalte Database, or stored as JSON files in a specific directory
		on the IDMU server, or both. Templates are loaded into cache from the TemplateJSON folder on server startup, 
		or whenever a <span class="keyword">DragonflyReload</span> option is specified on a Merge request. 
		When a Merge request needs a template that is not found in the cache, it looks to the Tempalte Database.
		It is possible to deploy IDMU without a Template Database. If this is done, any request for a tempalte 
		that is not cached from the TemplateJSON directory will throw a Merge Exception.  
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="Require">Require Directive</a></h3>
	<p>The require directive specifies a comma separated list of tags that should exist in the replace hash.
		If a required tag is missing the merge process will fail with an exception. If the soft fail indicator
		is present, the missing values message will be inserted into the template.</p>
	<div class="metadata"><h4>The Require directive has the following Options</h4>
	<ul>
		<li><span class="option">Tags</span> - The comma separated list of requried Tags</li>
	</ul></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="ReplaceVal">Replace Value Directive</a></h3>
	<p>The Replace Value directive provides for a simple static from/to value pair. The from value is added 
		as-is to the replace stack. This directive is frequently used in conjunction
		with the Not-Last and Only-Last options of the Insert Rows directives. </p>
	<p>For a more flexable way to place static values on the Replace Hash see the Replace from Csv Directives</p>
	<div class="metadata"><h4>The Replace Value directive has the following Options</h4>
	<ul>
		<li><span class="option">From</span> - The value to replace</li>
		<li><span class="option">To</span> - The value to replace it with</li>
	</ul></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="InsertTag">Insert Sub-Templates from Tag Data Directive</a></h3>
	<p>The Insert Sub-Templates If directive combines the functionality of the
		<a href="#Inserting">Insert Sub-Templates</a> with the 
		<a href="#ProviderTag">Tag</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="InsertSql">Insert Sub-Templates from Sql Rows Directive</a></h3>
	<p>The Insert Sub-Templates from SQL directive combines the functionality of the
		<a href="#InsertSubs">Insert Sub-Templates</a> with the 
		<a href="#ProviderJdbc">SQL</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="ReplaceRowSql">Get Replace Values From Sql Row Directive</a></h3>
	<p>The Replace Row from SQL directive combines the functionality of
		<a href="#ReplaceRow">Replace Row</a> with the 
		<a href="#ProviderJdbc">SQL</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="ReplaceColSql">Get Replace Values From Sql Column Directive</a></h3>
	<p>The Replace Column from SQL directive combines the functionality of
		<a href="#ReplaceCol">Replace Col</a> with the 
		<a href="#ProviderJdbc">SQL</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="InsertCsv">Insert Sub-Templates from Csv Directive</a></h3>
	<p>The Insert Sub-Templates from CSV directive combines the functionality of the
		<a href="#InsertSubs">Insert Sub-Templates</a> with the 
		<a href="#ProviderCsv">CSV</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="ReplaceRowCsv">Get Replace Values From Csv Row Directive</a></h3>
	<p>The Replace Row from CSV directive combines the functionality of
		<a href="#ReplaceRow">Replace Row</a> with the 
		<a href="#ProviderCsv">CSV</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="ReplaceColCsv">Get Replace Values From Csv Column Directive</a></h3>
	<p>The Replace Column from CSV directive combines the functionality of
		<a href="#ReplaceCol">Replace Col</a> with the 
		<a href="#ProviderCsv">CSV</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="InsertHtml">Insert Sub-Templates from Html Table Rows Directive</a></h3>
	<p>The Insert Sub-Templates from HTML directive combines the functionality of the
		<a href="#InsertSubs">Insert Sub-Templates</a> with the 
		<a href="#ProviderHtml">HTML</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="ReplaceRowHtml">Get Replace Values From Html Table Row Directive</a></h3>
	<p>The Replace Row from HTML directive combines the functionality of
		<a href="#ReplaceRow">Replace Row</a> with the 
		<a href="#ProviderHtml">HTML</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
		
	<div class="section">
	<h3><a id="ReplaceColHtml">Get Replace Values From Html Table Column Directive</a></h3>
	<p>The Replace Column from HTML directive combines the functionality of
		<a href="#ReplaceCol">Replace Col</a> with the 
		<a href="#ProviderHtml">HTML</a> data provider.</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="ReplaceMarkupHtml">Get Replace Values From Html Markup Directive</a></h3>
	<p>The Replace Column from HTML directive uses the <a href="#ProviderHtml">HTML</a> data provider.
		to fetch an HTML document, and then find Replace From/To values based on the following options:</p>
	<div class="metadata"><h4>The Replace Value directive has the following Options</h4>
	<ul>
		<li><span class="option">Element Selector</span> - CSS Selector to find HTML elements to use</li>
		<li><span class="option">From Attribute</span> - Name of the attribute to use as a "From" value</li>
		<li><span class="option">To Attribute</span> - Name of the attribute to use as a "To" value</li>
	</ul></div>
	<p>By way of example, the following options will produce the following replace hash</p>
	<ul>
		<li><span class="option">Element Selector</span> - Input</li>
		<li><span class="option">From Attribute</span> - ID</li>
		<li><span class="option">To Attribute</span> - Empty (content of the selected element)</li>
	</ul> 
	<textarea></textarea>
	<table><tr><th>From</th><th>To</th></tr></table>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="ProviderJdbc">SQL (JDBC) Data</a></h3>
	<p>The SQL (JDBC) Data Providers utilize a JDBC data source configured in the IDMU J2EE Context.xml file, 
	and create a SQL SELECT statement based on the options provided. The components of the select statement
	are each processed by the Replace Hash before being executed.</p>
	<p>JDBC Directives</p>
	<ul>
		<li><a href="#InsertSql">Insert Sub-Templates from Sql</a></li>
		<li><a href="#ReplaceRowSql">Get Replace Values From Sql Row</a></li>
		<li><a href="#ReplaceColSql">Get Replace Values From Sql Column</a></li>
	</ul>
	<div class="metadata"><h4>Directives that use the JDBC Data Provider have the following options:</h4>
	<ul>
		<li><span class="option">Source</span> - The JDBC Data Source name (from the web.xml descriptor)</li>
		<li><span class="option replaced">Select Columns</span> - The columns to select, * is supported by most JDBC drivers</li>
		<li><span class="option replaced">From Table</span> - The Tables to select from (Optional)</li>
		<li><span class="option replaced">Where Condition</span> - The Where condition for the SQL Select Statement (Optional)</li>
	</ul>
	<p><span class="replaced footnote">Replace Hash processed before use</span></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="ProviderCsv">CSV Data</a></h3>
	<p>CSV Data Providers fetch their information from either a URL, the data associated with a Replace Tag, or
	as static data from the directive itself. Once fetched the data is parsed based on the Microsoft Excel CSV
	formatting standards.</p>
	<p>CSV Directives</p>
	<ul>
		<li><a href="#InsertCsv">Insert Sub-Templates from Csv Rows</a></li>
		<li><a href="#ReplaceRowCsv">Get Replace Values From Csv Row</a></li>
		<li><a href="#ReplaceColCsv">Get Replace Values From Csv Column</a></li>
	</ul>
	<div class="metadata"><h4>Directives that use the CSV Data Provider have the following options:</h4>
	<ul>
		<li><span class="option replaced">URL</span> - The URL used to retrieve data for the merge</li>
		<li><span class="option">Tag</span> - That Tag that contains data if the URL is not provided or does not return data</li>
		<li><span class="option">Static Value</span> - The Static value to be used if the Tag is not in the Replace Hash</li>
	</ul>
	<p><span class="replaced footnote">Replace Hash processed before use</span></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

	<div class="section">
	<h3><a id="ProviderHtml">HTML Data</a></h3>
	<p>HTML Data Providers fetch their information from either a URL, the data associated with a Replace Tag, or
	as static data from the directive itself. Once fetched the data is parsed as HTML, and the HTML &lt;table&gt;
	elements are selected based on the css selector option and parsed for use. Note that all HTML table elements
	must specify a table row with table header values. If multiple tables match the selector, they are each parsed
	and processed in the order they are found in the HTML source.</p>
	<p>HTML Directives</p>
	<ul>
		<li><a href="#InsertHtml">Insert Sub-Templates from Html Table Rows</a></li>
		<li><a href="#ReplaceRowHtml">Get Replace Values From Html Table Row</a></li>
		<li><a href="#ReplaceColHtml">Get Replace Values From Html Table Column</a></li>
		<li><a href="#ReplaceMarkupHtml">Get Replace Values From Html Markup</a></li>
	</ul>
	<div class="metadata"><h4>Directives that use the HTML Data Provider have the following options:</h4>
	<ul>
		<li><span class="option replaced">URL</span> - The URL used to retrieve data for the merge</li>
		<li><span class="option">Tag</span> - That Tag that contains data if the URL is not provided or does not return data</li>
		<li><span class="option">Static Value</span> - The Static value to be used if the Tag is not in the Replace Hash</li>
	</ul>
	<p><span class="replaced footnote">Replace Hash processed before use</span></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="ProviderTag">Tag Data</a></h3>
	<p>Tag Data providers utilize data from the Replace Hash (to support the Insert From Tags directive).
	If the Tag exists and meets the Condition parameter a data table is constructed with a single column
	that has the Tag Name. If the "Is List" indicator is set, the tag data is treated as a comma seperated
	list of values and the data table has multiple rows, one for each value. If the "Is List" indicator is
	not set the data table will have only a single row.</p>
	<p>Tag Data Directives</p>
	<ul>
		<li><a href="#InsertTag">Insert Sub-Templates from Tag</a></li>
	</ul>
	<p>The Tag Data provider is used to select data that exists in the Replace Hash to use for Directive Processing</p>
	<div class="metadata"><h4>Directives that use the Tag Data Provider have the following options:</h4>
	<ul>
		<li><span class="option">Tag</span> - The tag that is evaluated build a table of input values</li>
		<li><span class="option">Condition</span> - Exists, NonBlank, Equals - The condition to evaluate</li>
		<li><span class="option">Equals</span> - The comparison value to use for "Equals" comparisons</li>
		<li><span class="option">Is List</span> - Specifies that the value contains a comma separated list of values, and 
			a data row should be created for each value, with the Tag as the column name</li>
	</ul></div>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="DeployDocker">Deploying in Docker</a></h3>
	<p>We are currently working on a Docker Container deployment, check back here for instructions.   
		velit sed quam aliquet hac tempor ac rhoncus, interdum augue enim suscipit curae eget turpis 
		ullamcorper consequat conubia ac curabitur molestie quam quis accumsan placerat rhoncus, lac</p>
	<p>To deploy IDMU Stand-alone: <a href="Tbd">Link To Container</a>
	<p>To deploy IDMU With Template Database and Editor: <a href="Tbd">Link To Container</a>
	<h4>Connecting your data source to the IDMU Container</h4>
	<p>To connect your JDBC data source to the IDMU containter..... 
		velit sed quam aliquet hac tempor ac rhoncus, interdum augue enim suscipit curae eget turpis 
		ullamcorper consequat conubia ac curabitur molestie quam quis accumsan placerat rhoncus, lac</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="DeployBluemix">Deploying in Bluemix</a></h3>
	<p>We are currently working on a BlueMix Service deployment, check back here for instructions.   
		velit sed quam aliquet hac tempor ac rhoncus, interdum augue enim suscipit curae eget turpis 
		ullamcorper consequat conubia ac curabitur molestie quam quis accumsan placerat rhoncus, lac</p>
	<p>To deploy IDMU Stand-alone: <a href="Tbd">Link to Project</a>
	<p>To deploy IDMU With Template Database and Editor: <a href="Tbd">Link to Project</a>
	<h4>Connecting your BlueMix IDMU to your Bluemix Database</h4>
	<p>To connect your Bluemix Database to your Bluemix IDMU Service..... 
		velit sed quam aliquet hac tempor ac rhoncus, interdum augue enim suscipit curae eget turpis 
		ullamcorper consequat conubia ac curabitur molestie quam quis accumsan placerat rhoncus, lac</p>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="DeployLiberty">Deploying on Linux with Liberty and IBM DB2 Express Edition</a></h3>
	<h4>Setting up a Linux Server</h4>
	<p>IDMU Has no special Linux prerequisites, but you will need to either disable your 
	firewall or enable the following firewall rules:</p>
	<ul><li>Port 80</li>
	<li>Port 8080</li></ul>
	<h4>Deploying WebSphere Liberty</h4>
	<p>Follow the instructions <a href="http://www-01.ibm.com/support/knowledgecenter/#!/SSEQTP_8.5.5/com.ibm.websphere.wlp.doc/ae/twlp_ins_installation_dist_cl.html?cp=SSEQTP_8.5.5%2F1-3-11-0-1-0-0-2">here</a> to install WebSphere Liberty</p>
	<h4>Deploying IBM DB2 Express Server</h4>
	<p>Follow the instructions <a href="http://www-03.ibm.com/software/products/en/db2-express-server-edition">here</a> to install the IBM DB2 Express Edition</p>
	<h4>Creating and Loading the Template Database</h4>
	<p>The DB2_TEMPLATE_STORE.SQL file found in the sql folder of the project is used to create the
	Tempalte Database and load validation values. The following script can be used to execute this 
	script on a Linux/Unix Server with access to the internet.</p>
	<textarea cols="100" rows="6">
cd /tmp
mkdir -p IDMU_DATA
cd IDMU_DATA
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/sql/DB2_TEMPLATE_STORE.SQL
db2 -pdrowssap &gt; DB2_TEMPLATE_STORE.SQL
	</textarea>	
	<h4>Installing IDMU into WebSphere Liberty</h4>
	<p>Simply copy the IDMU.war file to the Tomcat application folder, the following script can be used
	to install the IDMU application on a Linux/Unix server with internet access.</p>
	<textarea  cols="100" rows="3">
cd /usr/local/tomcat7/applications
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/IDMU.war
	</textarea>	
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="DeployTomcat">Deploying on Linux with Tomcat and MySql</a></h3>
	<h4>Setting up a Linux Server</h4>
	<p>IDMU Has no special Linux prerequisites, but you will need to either disable your 
	firewall or enable the following firewall rules:</p>
	<ul><li>Port 80</li>
	<li>Port 8080</li></ul>
	<h4>Deploying MySql</h4>
	<p>You can use the following commands to install MySql on a RHEL v6 server</p>
	<textarea cols="100" rows="5">
yum install -y mysql-server
service mysqld start
mysqladmin -u root password drowssap
chkconfig mysqld on
	</textarea>
	<p>You can use the following commands to install MySql (actually MariaDB) on a RHEL v7 server</p>
	<textarea  cols="100" rows="5">
yum install -y mariadb-server mariadb
systemctl start mariadb
mysqladmin -u root password drowssap
systemctl enable mariadb.service
	</textarea>	
	<h4>Deploying Tomcat</h4>
	<p>You can use this simple script on a Linux system to install Tomcat and the MySql JDBC Drivers</p>
	<textarea  cols="100" rows="13">
yum install -y java 
cd /tmp
wget http://apache.mirrors.tds.net/tomcat/tomcat-7/v7.0.59/bin/apache-tomcat-7.0.59.tar.gz
tar xzf apache-tomcat-7.0.59.tar.gz
mv apache-tomcat-7.0.59 /usr/local/tomcat7
#
cd /tmp
wget http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.34.tar.gz
tar -xvf mysql-connector-java-5.1.34.tar.gz
cd /tmp/mysql-connector-java-5.1.34
cp mysql-connector-java-5.1.34-bin.jar /usr/local/tomcat7/lib/
/usr/local/tomcat7/bin/startup.sh
	</textarea>	
	<h4>Creating and Loading the Template Database</h4>
	<p>The MYSQL_TEMPLATE_STORE.SQL file found in the sql folder of the project is used to create the
	Tempalte Database and load validation values. The following script can be used to execute this 
	script on a Linux/Unix Server with access to the internet.</p>
	<textarea cols="100" rows="6">
cd /tmp
mkdir -p IDMU_DATA
cd IDMU_DATA
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/sql/MYSQL_TEMPLATE_STORE.SQL
mysql -pdrowssap &gt; MYSQL_TEMPLATE_STORE.SQL
	</textarea>	
	<h4>Installing IDMU into Tomcat</h4>
	<p>Simply copy the IDMU.war file to the Tomcat application folder, the following script can be used
	to install the IDMU application on a Linux/Unix server with internet access.</p>
	<textarea  cols="100" rows="3">
cd /usr/local/tomcat7/applications
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/IDMU.war
	</textarea>	
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="DeployOracle">Deploying on Linux with Tomcat and Oracle Express</a></h3>
	<h4>Setting up a Linux Server</h4>
	<p>IDMU Has no special Linux prerequisites, but you will need to either disable your 
	firewall or enable the following firewall rules:</p>
	<ul><li>Port 80</li>
	<li>Port 8080</li></ul>
	<h4>Deploying MySql</h4>
	<p>You can use the following commands to install Oracle Express</p>
	<textarea cols="100" rows="5">
#TBD Install Oracle	
	</textarea>
	<h4>Deploying Tomcat</h4>
	<p>You can use this simple script on a Linux system to install Tomcat and the Oracle Express JDBC Drivers</p>
	<textarea  cols="100" rows="8">
yum install -y java 
cd /tmp
wget http://apache.mirrors.tds.net/tomcat/tomcat-7/v7.0.59/bin/apache-tomcat-7.0.59.tar.gz
tar xzf apache-tomcat-7.0.59.tar.gz
mv apache-tomcat-7.0.59 /usr/local/tomcat7
#
#TBD - Install Oracle JDBC Drivers
	</textarea>	
	<h4>Creating and Loading the Template Database</h4>
	<p>The ORACLEL_TEMPLATE_STORE.SQL file found in the sql folder of the project is used to create the
	Tempalte Database and load validation values. The following script can be used to execute this 
	script on a Linux/Unix Server with access to the internet.</p>
	<textarea cols="100" rows="6">
cd /tmp
mkdir -p IDMU_DATA
cd IDMU_DATA
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/sql/ORACLE_TEMPLATE_STORE.SQL
mysql -pdrowssap &gt; ORACLE_TEMPLATE_STORE.SQL
	</textarea>	
	<h4>Installing IDMU into Tomcat</h4>
	<p>Simply copy the IDMU.war file to the Tomcat application folder, the following script can be used
	to install the IDMU application on a Linux/Unix server with internet access.</p>
	<textarea  cols="100" rows="3">
cd /usr/local/tomcat7/applications
wget https://github.com/FlatBallFlyer/IBM-Data-Merge-Utility/blob/master/IDMU.war
	</textarea>	
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>
	
	<div class="section">
	<h3><a id="jSon">Template Object JSON Format</a></h3>
	<p>IDMU Supports a Template Get/Post service that is used by the Template Editor, anc can be used to 
		eaisly export/import Templates between systems. The http://IDMU/persist.html servlet can be used with
		an http get request to get a jSon formated copy of a template, and with an http post to store a template
		in the Template Database.</p>
	<p>Template JSON Data takes the following format<p>
	<div class="json"><pre><code>{	"collection":<span class="description">The Collection Name</span>,
	"columnValue":<span class="description">The Column Value - For Column Associated Sub-Templates</span>,
	"name":<span class="description">The Template Name</span>,
	"description":<span class="description">The Template Description (Optional)</span>,
	"outputFile":<span class="description">The Output File Name (Optional)</span>,
	"content":<span class="description">The Template Content</span>,
	"directives":[<span class="description">A list of Directive Objects.</span>]
}</code></pre></div>
<div class="footerLink"><a href="#Top">Back To Top</a></div></div>

<div class="section"><h3>Directive Objects JSON Formats</h3>
	<ul>
		<li>The Require Directive
<div class="json"><pre><code>{	"type":0,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"tags":[<span class="description">List of Tag Strings</span>],
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Replace Value Directive
<div class="json"><pre><code>{	"type":1,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"from":<span class="description">The value to replace (will be wrapped in {brackets})</span>,
	"to":<span class="description">The value to replace with</span>
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Insert Sub-Templates from Tag Directive
<div class="json"><pre><code>{	"type":2,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"collectionName":<span class="description">The Collection to insert sub-templates from</span>,
	"collectionColumn":<span class="description">The Column to use when selecting sub-templates (Optional)</span>,
	"notLast":[<span class="description">List of Tags to replace with blank values on all but the last row</span>],
	"onlyLast":[<span class="description">List of Tags to replace with blank values on the last row</span>],
	"provider":{<span class="description">An Tag Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Insert Sub-Templates from Sql Rows Directive
<div class="json"><pre><code>{	"type":10,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"collectionName":<span class="description">The Collection to insert sub-templates from</span>,
	"collectionColumn":<span class="description">The Column to use when selecting sub-templates (Optional)</span>,
	"notLast":[<span class="description">List of Tags to replace with blank values on all but the last row</span>],
	"onlyLast":[<span class="description">List of Tags to replace with blank values on the last row</span>],
	"provider":{<span class="description">A SQL Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Get Replace Values from SQL Row Directive
<div class="json"><pre><code>{	"type":11,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"provider":{<span class="description">A SQL Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Get Replace Values from SQL Column Directive
<div class="json"><pre><code>{	"type":12,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"fromColumn":<span class="description">The Column name that is used for From values</span>,
	"toColumn":<span class="description">The Column name that is used for To values</span>,
	"provider":{<span class="description">A SQL Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Insert Sub-Templates from CSV Rows Directive
<div class="json"><pre><code>{	"type":21,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"collectionName":<span class="description">The Collection to insert sub-templates from</span>,
	"collectionColumn":<span class="description">The Column to use when selecting sub-templates (Optional)</span>,
	"notLast":[<span class="description">List of Tags to replace with blank values on all but the last row</span>],
	"onlyLast":[<span class="description">List of Tags to replace with blank values on the last row</span>],
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	 
		<li>The Get Replace Values from CSV Row Directive
<div class="json"><pre><code>{	"type":22,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	 
		<li>The Get Replace Values from CSV Column Directive
<div class="json"><pre><code>{	"type":23,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"fromColumn":<span class="description">The Column name that is used for From values</span>,
	"toColumn":<span class="description">The Column name that is used for To values</span>,
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	 
		<li>The Insert Sub-Templates from HTML Tables Directive
<div class="json"><pre><code>{	"type":31,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"collectionName":<span class="description">The Collection to insert sub-templates from</span>,
	"collectionColumn":<span class="description">The Column to use when selecting sub-templates (Optional)</span>,
	"notLast":[<span class="description">List of Tags to replace with blank values on all but the last row</span>],
	"onlyLast":[<span class="description">List of Tags to replace with blank values on the last row</span>],
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	
		<li>The Get Replace Values from HTML Table row Directive
<div class="json"><pre><code>{	"type":32,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	 
		<li>The Get Replace Values from HTML Table Columns Directive
<div class="json"><pre><code>{	"type":33,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"fromColumn":<span class="description">The Column name that is used for From values</span>,
	"toColumn":<span class="description">The Column name that is used for To values</span>,
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div>
		<div class="footerLink"><a href="#Top">Back To Top</a></div></li>	 
		<li>The Get Replace Values from HTML Markup Directive
<div class="json"><pre><code>{	"type":34,
	"description":<span class="description">Directive Description (Optional)</span>,
	"softFail":true|false<span class="description">Directive level Soft Fail Indicator</span>,
	"provider":{<span class="description">An HTTP Data Provider</span>}
}</code></pre></div></li>
	</ul>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</div>

<div class="section"><h3>Data Provider Objects JSON Formats</h3>
	<ul>
		<li>The SQL (JDBC) Data Provider
<div class="json"><pre><code>{	"source":<span class="description">The JDBC Data Source Name (From context.xml)</span>,
	"columns":<span class="description">The Columns to Select - * is supported</span>,
	"from":<span class="description">The Tables to select from (Optional)</span>,
	"where":<span class="description">The Where Clause (Optional)</span>
}</code></pre></div></li>
		<div class="footerLink"><a href="#Top">Back To Top</a></div>	
		<li>An HTTP Data Provider
<div class="json"><pre><code>{	"url":<span class="description">The URL used to fetched from</span>,
	"tag":<span class="description">The Replace Tag that data is fetched from if the URL does not return data</span>
	"staticData":<span class="description">The Default Data used if the Tag does not exist</span>,
}</code></pre></div></li>
	<div class="footerLink"><a href="#Top">Back To Top</a></div>	
	</ul>
	</div>
</body>
</html>